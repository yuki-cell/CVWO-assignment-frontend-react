(this["webpackJsonpcvwo-todo-app-frontend"]=this["webpackJsonpcvwo-todo-app-frontend"]||[]).push([[0],{210:function(e,t,a){},211:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var s=a(6),n=a(0),i=a.n(n),r=a(14),c=a.n(r),o=(a(210),a(11)),l=a(12),u=a(32),d=a(16),h=a(18),p=(a(211),a(68)),b=a(29),j=a(386),m=a(389),f=a(186),k=a(384),O=a(98),v=a.n(O),x=a(109),g=a(67);var T=function(e){var t=Object(n.useState)({name:"",tags_attributes:[]}),a=Object(b.a)(t,2),i=a[0],r=(a[1],g.a().shape({name:g.b().required("Name is required")})),c=Object(x.a)({initialValues:i,validationSchema:r,onSubmit:function(t,a){var s=a.resetForm;e.app.axios.post("/tasks",{task:t}).then((function(t){e.app.addTask(t.data),s();c.setFieldValue("tags_attributes",[],!0)})).catch((function(e){console.log(e)}))}});return Object(s.jsx)("form",{onSubmit:c.handleSubmit,children:Object(s.jsxs)(k.a,{container:!0,spacing:2,children:[Object(s.jsx)(k.a,{item:!0,xs:12,children:Object(s.jsx)(f.a,{children:"Your todo:"})}),Object(s.jsx)(k.a,{item:!0,xs:12,children:Object(s.jsx)(m.a,{id:"outlined-basic",variant:"outlined",size:"small",name:"name",label:"Task Name",value:c.values.name,onChange:c.handleChange,error:c.touched.name&&Boolean(c.errors.name),helperText:c.touched.name&&c.errors.name})}),Object(s.jsx)(k.a,{item:!0,xs:12,children:Object(s.jsx)(v.a,{label:"Tags",value:c.values.tags_attributes.map((function(e){return e.name})),onAdd:function(e){return function(e){var t=Object(p.a)({},c.values).tags_attributes;t.push({name:e}),c.setFieldValue("tags_attributes",t,!0),console.log(c.values)}(e)},onDelete:function(e,t){return function(e,t){var a=Object(p.a)({},c.values).tags_attributes;a.splice(t,1),c.setFieldValue("tags_attributes",a,!0)}(0,t)}})}),Object(s.jsx)(k.a,{item:!0,xs:12,children:Object(s.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",children:"Create new task"})})]})})},F=a(385),C=a(388),y=a(391),S=a(390),_=a(387),w=a(392);var E=Object(_.a)((function(e){return{paper:{position:"absolute",width:500,height:500,backgroundColor:"#d9ded9",border:"0.5px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var D=function(e){var t=E(),a={top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},i=Object(n.useState)({name:e.task.name,tags_attributes:e.task.tags}),r=Object(b.a)(i,2),c=r[0],o=(r[1],g.a().shape({name:g.b().required("Name is required")})),l=Object(x.a)({initialValues:c,validationSchema:o,onSubmit:function(t,a){a.resetForm;e.app.axios.patch("/tasks/".concat(e.task.id),{task:t}).then((function(t){e.app.updateTask(t.data)})).catch((function(e){console.log(e)}))}}),u=Object(s.jsx)("div",{style:a,className:t.paper,children:Object(s.jsxs)("form",{onSubmit:l.handleSubmit,children:[Object(s.jsx)(w.a,{mb:4,justifyContent:"center",children:Object(s.jsx)(m.a,{id:"outlined-basic",variant:"outlined",size:"small",name:"name",label:"Task Name",value:l.values.name,onChange:l.handleChange,error:l.touched.name&&Boolean(l.errors.name),helperText:l.touched.name&&l.errors.name})}),Object(s.jsx)(k.a,{item:!0,xs:12,children:Object(s.jsx)(v.a,{label:"Tags",value:l.values.tags_attributes.map((function(e){return e.name})),onAdd:function(e){return function(e){var t=Object(p.a)({},l.values).tags_attributes;t.push({name:e}),l.setFieldValue("tags_attributes",t,!0),console.log(l.values)}(e)},onDelete:function(e,t){return function(e,t){var a=Object(p.a)({},l.values).tags_attributes;a.splice(t,1),l.setFieldValue("tags_attributes",a,!0)}(0,t)}})}),Object(s.jsxs)(k.a,{item:!0,container:!0,justify:"center",xs:12,spacing:3,children:[Object(s.jsx)(k.a,{item:!0,container:!0,xs:4,justify:"center",children:Object(s.jsx)(j.a,{size:"small",variant:"contained",type:"submit",children:"SAVE"})}),Object(s.jsx)(k.a,{item:!0,container:!0,xs:4,justify:"center",children:Object(s.jsx)(j.a,{size:"small",variant:"contained",onClick:e.onClose,children:"CLOSE"})})]})]})});return Object(s.jsx)(S.a,{open:e.open,onClose:e.onClose,children:u})},N=a(185),V=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={editFormOpen:!1},s.handleEditFormOpen=s.handleEditFormOpen.bind(Object(u.a)(s)),s.handleEditFormClose=s.handleEditFormClose.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleEditFormOpen",value:function(){this.setState({editFormOpen:!0})}},{key:"handleEditFormClose",value:function(){this.setState({editFormOpen:!1})}},{key:"handleTaskDelete",value:function(e,t){var a=this;e.preventDefault(),this.props.app.axios.delete("/tasks/".concat(t)).then((function(e){a.props.app.removeTask(e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e,t=this;return this.props.task.tags&&(e=this.props.task.tags.map((function(e){return Object(s.jsx)(N.a,{label:e.name},e.id)}))),Object(s.jsxs)(C.a,{button:!0,children:[Object(s.jsx)(y.a,{primary:this.props.task.name}),e,Object(s.jsx)(j.a,{variant:"contained",color:"primary",onClick:this.handleEditFormOpen,children:"Edit"}),Object(s.jsx)(D,{open:this.state.editFormOpen,onClose:this.handleEditFormClose,task:this.props.task,app:this.props.app}),Object(s.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(e){return t.handleTaskDelete(e,t.props.task.id)},children:"Delete"})]})}}]),a}(i.a.Component),L=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsx)(F.a,{children:this.props.app.state.filtered_tasks.map((function(t){return Object(s.jsx)(V,{app:e.props.app,task:t},t.id)}))})}}]),a}(i.a.Component),q=a(193),I=a.n(q);var A=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),i=a[0],r=a[1],c=function(t){var a=e.tasks.slice();""!=t&&(a=a.filter((function(e){return o(e.tags,t)}))),e.setFilteredTasks(a)},o=function(e,t){return e.some((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))};return Object(s.jsxs)("div",{children:["Search by tag:",Object(s.jsx)(I.a,{value:i,onChange:function(e){r(e),c(e)},onCancelSearch:function(){e.setFilteredTasks(e.tasks)}})]})},z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={tasks:[],filtered_tasks:[]},a.setTasks=a.setTasks.bind(Object(u.a)(a)),a.setFilteredTasks=a.setFilteredTasks.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"setTasks",value:function(e){this.setState({tasks:e})}},{key:"setFilteredTasks",value:function(e){this.setState({filtered_tasks:e})}},{key:"addTask",value:function(e){var t=this.state.tasks.slice();t.push(e),this.setTasks(t);var a=this.state.filtered_tasks.slice();a.push(e),this.setFilteredTasks(a)}},{key:"updateTask",value:function(e){var t=this.state.tasks.slice(),a=t.findIndex((function(t){return t.id===e.id}));t.splice(a,1,e),this.setTasks(t);var s=this.state.filtered_tasks.slice();a=s.findIndex((function(t){return t.id===e.id})),s.splice(a,1,e),this.setFilteredTasks(s)}},{key:"removeTask",value:function(e){var t=this.state.tasks.slice(),a=t.findIndex((function(t){return t.id===e.id}));t.splice(a,1),this.setTasks(t);var s=this.state.filtered_tasks.slice();a=s.findIndex((function(t){return t.id===e.id})),s.splice(a,1),this.setFilteredTasks(s)}},{key:"componentDidMount",value:function(){var e=this;this.axios.get("/tasks").then((function(t){console.log(t),e.setState({tasks:t.data,filtered_tasks:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(w.a,{color:"text.primary",children:[Object(s.jsx)("h1",{className:"siimple-box-title siimple--color-white",children:"React Todo App"}),Object(s.jsx)(T,{app:this}),Object(s.jsx)("div",{className:"siimple-rule"}),Object(s.jsx)(A,{tasks:this.state.tasks,setFilteredTasks:this.setFilteredTasks}),Object(s.jsx)(L,{app:this})]})})}},{key:"axios",get:function(){return a(342).create({baseURL:"https://todo-cvwo-rails-backend.herokuapp.com/",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},responseType:"json"})}}]),n}(i.a.Component),B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,393)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))};c.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(z,{})}),document.getElementById("root")),B()}},[[361,1,2]]]);
//# sourceMappingURL=main.41c80f6e.chunk.js.map